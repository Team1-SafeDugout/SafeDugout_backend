<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace = "member">
	<!-- 로그인 -->
	<select id="login" parameterType="MemberDTO" resultType="int">
		select member_number from tbl_member
		where member_id = #{memberId} and member_pw = #{memberPw}
	</select>
	
	
	<!-- 회원가입 -->
	<insert id = "join" parameterType = "MemberDTO">
		INSERT INTO TBL_MEMBER (MEMBER_NUMBER,MEMBER_NAME,MEMBER_PHONE,MEMBER_ID,MEMBER_PW,MEMBER_EMAIL,MEMBER_MY_TEAM,MEMBER_POINT,MEMBER_JOIN_DATE,MEMBER_POSTAL_CODE)
		VALUES (seq_member.nextval, #{memberName}, #{memberPhone}, #{memberId}, #{memberPw}, #{memberEmail}, #{memberMyTeam}, #{memberPoint}, SYSDATE, #{memberPostalCode})
	</insert>
	
	
	<!-- 아이디 중복 확인 -->
	<select id = "checkId" parameterType = "string" resultType = "int">
		select Count(member_number) from tbl_member
		where member_id = #{memberId}
	</select>
	
	<!-- 아이디 찾기 -->
	<select id = "findId" parameterType = "MemberDTO" resultType = "string">
		select Count(member_number) from tbl_member
		where member_email = #{memberEmail} AND member_name = #{memberName} AND  member_phone = #{memberPhone}
	</select>
	
	<!-- 탈퇴시 비밀번호 검사 -->
	<select id = "checkPw" parameterType = "MemberDTO" resultType = "int">
		select Count(member_number) from tbl_member
		where member_id = #{memberId} AND member_pw = #{memberPw}
	</select>
	
	<!-- 비밀번호 찾기 -->
	<select id = "findPw" parameterType = "MemberDTO" resultType = "int">
		select Count(member_number) from tbl_member
		where member_id = #{memberId} and member_email = #{memberEmail} AND member_name = #{memberName} AND  member_phone = #{memberPhone}
	</select>
	
	
	<!-- 비밀번호 찾기 이후 비밀번호 변경 -->
	<update id="changePw" parameterType = "MemberDTO">
		UPDATE TBL_MEMBER 
		SET MEMBER_PW =  #{memberPw}
		WHERE MEMBER_ID =  #{memberId}
	</update>
</mapper>