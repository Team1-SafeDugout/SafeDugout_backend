<?xml version="1.0" encoding="UTF-8"?>
<mapper namespace="TeamCommunityNoticeMapper">
	<!-- 팀 공지 사항 목록 조회 -->
	<select id="select" resultType="TeamNoticePostDTO">
<![CDATA[ SELECT NP.NOTICE_POST_NUMBER, NT.NOTICE_TYPE, NP.NOTICE_POST_TITLE, NP.NOTICE_POST_CONTENT, NP.NOTICE_POST_DATE, NVL(NP.NOTICE_POST_UPDATE, NP.NOTICE_POST_DATE) AS LAST_UPDATE, A.ADMIN_NAME, T.TEAM_NAME FROM TBL_NOTICE_POST NP JOIN TBL_NOTICE_TYPE NT ON NP.NOTICE_TYPE_ID = NT.NOTICE_TYPE_ID JOIN TBL_ADMIN A ON NP.ADMIN_NUMBER = A.ADMIN_NUMBER JOIN TBL_TEAM T ON NP.TEAM_NUMBER = T.TEAM_NUMBER WHERE NT.NOTICE_TYPE = '팀' AND NP.TEAM_NUMBER = #{teamNumber} ORDER BY NP.NOTICE_POST_DATE DESC ]]>
	</select>
	<!-- 팀 공지 사항 상세 조회 -->
	<select id="detailSelect" resultType="TeamNoticePostDTO">
<![CDATA[ SELECT NP.NOTICE_POST_NUMBER, NP.NOTICE_POST_TITLE, NP.NOTICE_POST_CONTENT, NP.NOTICE_POST_DATE, NVL(NP.NOTICE_POST_UPDATE, NP.NOTICE_POST_DATE) AS LAST_UPDATE, A.ADMIN_NAME, T.TEAM_NAME, AT.ATTACHMENT_NUMBER, AT.ATTACHMENT_NAME, AT.ATTACHMENT_PATH FROM TBL_NOTICE_POST NP JOIN TBL_NOTICE_TYPE NT ON NP.NOTICE_TYPE_ID = NT.NOTICE_TYPE_ID JOIN TBL_ADMIN A ON NP.ADMIN_NUMBER = A.ADMIN_NUMBER JOIN TBL_TEAM T ON NP.TEAM_NUMBER = T.TEAM_NUMBER LEFT JOIN TBL_NOTICE_ATTACHMENT NA ON NP.NOTICE_POST_NUMBER = NA.NOTICE_POST_NUMBER LEFT JOIN TBL_ATTACHMENT AT ON NA.ATTACHMENT_NUMBER = AT.ATTACHMENT_NUMBER WHERE NP.NOTICE_POST_NUMBER = #{noticePostNumber} AND NT.NOTICE_TYPE = '팀' ]]>
	</select>
</mapper>