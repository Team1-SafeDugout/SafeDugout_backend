<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "attachment">
<!-- 추가 관련 -->
<insert id = "insertAttachment" parameterType = "AttachmentDTO">
INSERT INTO TBL_ATTACHMENT
(ATTACHMENT_NUMBER, ATTACHMENT_TYPE_ID, ATTACHMENT_NAME, ATTACHMENT_SIZE, ATTACHMENT_PATH)
VALUES(seq_attachment_number.nextval, #{attachmentTypeId}, #{attachmentName}, #{attachmentSize}, #{attachmentPath})
</insert>

<insert id = "insertAttachment" parameterType = "AdminNoticeDTO">
INSERT INTO TBL_NOTICE_ATTACHMENT
(NOTICE_POST_NUMBER, ATTACHMENT_NUMBER)
VALUES(#{noticePostNumber}, #{attachmentNumber})
</insert>

<!-- 제거 관련 -->

</mapper>
<!-- CREATE TABLE TBL_NOTICE_ATTACHMENT(
NOTICE_POST_NUMBER NUMBER,
ATTACHMENT_NUMBER NUMBER,
CONSTRAINT PK_NOTICE_ATTACHMENT PRIMARY KEY(NOTICE_POST_NUMBER, ATTACHMENT_NUMBER),
CONSTRAINT FK_ATTACHMENT_NOTICE_NUMBER FOREIGN KEY(NOTICE_POST_NUMBER) REFERENCES TBL_NOTICE_POST(NOTICE_POST_NUMBER)ON DELETE CASCADE,
CONSTRAINT FK_NOTICE_ATTACHMENT_NUMBER FOREIGN KEY(ATTACHMENT_NUMBER) REFERENCES TBL_ATTACHMENT (ATTACHMENT_NUMBER)ON DELETE CASCADE
); -->

<!-- CREATE TABLE TBL_ATTACHMENT(
ATTACHMENT_NUMBER NUMBER,
ATTACHMENT_TYPE_ID NUMBER,
ATTACHMENT_NAME VARCHAR2(100),
ATTACHMENT_SIZE NUMBER,
ATTACHMENT_PATH VARCHAR2(200),
CONSTRAINT PK_ATTACHMENT PRIMARY KEY(ATTACHMENT_NUMBER),
CONSTRAINT FK_ATTACHMENT_TYPE FOREIGN KEY(ATTACHMENT_TYPE_ID) REFERENCES TBL_ATTACHMENT_TYPE(ATTACHMENT_TYPE_ID)
); -->